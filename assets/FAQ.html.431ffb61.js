import{_ as i,r as c,o as d,c as t,a as e,b as n,w as l,F as p,d as o,e as r}from"./app.39d731c7.js";const u={},h=e("h1",{id:"\u5E38\u89C1\u95EE\u9898",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u5E38\u89C1\u95EE\u9898","aria-hidden":"true"},"#"),o(" \u5E38\u89C1\u95EE\u9898")],-1),m={class:"custom-container tip"},b=e("p",{class:"custom-container-title"},"\u63D0\u793A",-1),_=e("p",null,"\u8BE5Q&A\u6587\u6863\u4F1A\u6301\u7EED\u66F4\u65B0\uFF0C\u975E\u5E38\u6B22\u8FCE\u60A8\u7684\u5EFA\u8BAE\u4E0E\u5171\u5EFA\uFF01",-1),g=o("\u5982\u679C\u60A8\u9047\u5230\u4EFB\u4F55\u672A\u5728\u6B64\u5904\u5217\u51FA\u7684\u90E8\u7F72\u6216\u4F7F\u7528\u95EE\u9898\uFF0C\u8BF7\u5728 GitHub issue \u7CFB\u7EDF\u4E2D\u8FDB\u884C\u641C\u7D22\u3002\u5982\u679C\u4ECD\u672A\u627E\u5230\u8BE5\u9519\u8BEF\u6D88\u606F\uFF0C\u60A8\u53EF\u4EE5\u901A\u8FC7"),f=o("\u793E\u533A"),v=o("\u63D0\u51FA\u95EE\u9898\uFF0C\u83B7\u5F97\u5E2E\u52A9\u3002"),x={class:"table-of-contents"},y=o("Server\u5E38\u89C1\u95EE\u9898\u4E0E\u5904\u7406\u65B9\u6CD5"),k=o("1. \u73AF\u5883\u90E8\u7F72"),E=o("1.1 pypi\u4E0B\u8F7D\u8D85\u65F6\u6216\u5931\u8D25"),R=o("1.2 Docker\u672A\u5B89\u88C5\u6216\u7248\u672C\u8FC7\u4F4E"),C=o("1.3 Docker-Compose\u542F\u52A8\u5931\u8D25"),T=o("1.4 Docker\u955C\u50CF\u6E90\u4E0B\u8F7D\u8D85\u65F6\u6216\u5931\u8D25"),D=o("1.5 Python\u5B89\u88C5\u6216\u6267\u884C\u5931\u8D25"),j=o("1.6 \u6267\u884Ccompose_init.sh\u811A\u672C\u7684pip install\u63D0\u793Asha256\u4E0D\u5339\u914D\u9519\u8BEF"),A=o("1.7 MacBook M1 \u4F7F\u7528 Docker-Compose\u62A5\u9519"),S=o("1.8 celery\u3001gunicorn\u547D\u4EE4\u627E\u4E0D\u5230"),N=o("2. \u670D\u52A1\u542F\u52A8\u4E0E\u521D\u59CB\u5316"),O=o("2.1 compose_init.sh\u811A\u672C\u9700\u8981\u586B\u5199\u7684\u5BC6\u7801\u662F\u4EC0\u4E48\uFF1F"),L=o("2.2 \u670D\u52A1\u5360\u7528\u7AEF\u53E3\u5F02\u5E38"),P=o("2.3 \u670D\u52A1\u8F93\u51FA\u65E5\u5FD7\u627E\u4E0D\u5230"),F=o("3. \u5E73\u53F0\u4F7F\u7528"),I=o("3.1 \u5E73\u53F0\u767B\u5F55\u7684\u9ED8\u8BA4\u8D26\u53F7\u5BC6\u7801\u662F\u4EC0\u4E48\uFF1F"),U=o("3.2 \u5E73\u53F0\u9ED8\u8BA4\u7684API Token\u662F\u4EC0\u4E48\uFF1F"),q=o("3.3 \u4EE3\u7801\u5E93\u767B\u8BB0\u51FA\u9519\uFF0C\u51FA\u73B0\u4EE3\u7801\u5E93\u53CA\u8D26\u53F7\u4E0D\u5339\u914D"),w=o("3.4 \u67E5\u770B\u95EE\u9898\u6587\u4EF6\u63D0\u793A\u83B7\u53D6\u4EE3\u7801\u4FE1\u606F\u8017\u65F6\u8F83\u4E45\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"),M=o("3.5 \u5BA2\u6237\u7AEF\u8BBF\u95EE\u6587\u4EF6\u670D\u52A1\u5668\uFF0C\u63D0\u793Amethod(upload_file) call fails on error: Expecting value: line 1 column 1 (char 0)"),V=o("3.6 \u5BA2\u6237\u7AEF\u8BBF\u95EE\u6587\u4EF6\u670D\u52A1\u5668\uFF0C\u63D0\u793AConnection timed out"),G=o("3.7 \u4EFB\u52A1\u6267\u884C\u7ED3\u679C\u5F02\u5E38\uFF0C\u63D0\u793A\u7B2C\u4E09\u65B9\u4F9D\u8D56\u6587\u4EF6\u670D\u52A1\u5668\u5F02\u5E38"),H=o("3.8 \u5BA2\u6237\u7AEF\u6267\u884C\u65F6\u63D0\u793A\u5DE5\u5177(xxx)\u626B\u63CF\u8FDB\u7A0B\u4E3A\u7A7A\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u914D\u7F6E\u5DE5\u5177\u8FDB\u7A0B!"),B=o("CodeAnalysis\u4ED3\u5E93\u6587\u4EF6\u95EE\u9898"),$=o("1. clone\u5230\u672C\u5730\u65F6\u76F8\u5173md\u6587\u4EF6\u5185\u8D44\u6E90\u56FE\u7247\u65E0\u6CD5\u663E\u793A"),K=r(`<h2 id="server\u5E38\u89C1\u95EE\u9898\u4E0E\u5904\u7406\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#server\u5E38\u89C1\u95EE\u9898\u4E0E\u5904\u7406\u65B9\u6CD5" aria-hidden="true">#</a> Server\u5E38\u89C1\u95EE\u9898\u4E0E\u5904\u7406\u65B9\u6CD5</h2><h3 id="_1-\u73AF\u5883\u90E8\u7F72" tabindex="-1"><a class="header-anchor" href="#_1-\u73AF\u5883\u90E8\u7F72" aria-hidden="true">#</a> 1. \u73AF\u5883\u90E8\u7F72</h3><h4 id="_1-1-pypi\u4E0B\u8F7D\u8D85\u65F6\u6216\u5931\u8D25" tabindex="-1"><a class="header-anchor" href="#_1-1-pypi\u4E0B\u8F7D\u8D85\u65F6\u6216\u5931\u8D25" aria-hidden="true">#</a> 1.1 pypi\u4E0B\u8F7D\u8D85\u65F6\u6216\u5931\u8D25</h4><p>\u5982\u679C\u5728\u6267\u884C<code>pip install</code>\u73AF\u8282\u51FA\u73B0\u4EE5\u4E0B\u9519\u8BEF\uFF0C\u53EF\u4EE5\u8C03\u6574\u4E00\u4E0B\u955C\u50CF\u6E90\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>WARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by &#39;ReadTimeoutError(&quot;HTTPSConnectionPool(host=&#39;files.pythonhosted. org&#39;, port=443): Read timed out.(read timeout=15)&quot;) &#39;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u8BE5\u9519\u8BEF\u662F\u8BBF\u95EE\u5B98\u65B9<code>pypi</code>\u4E0B\u8F7D\u6E90\u65F6\u7F51\u7EDC\u4E0D\u901A\u6216\u8005\u4E0D\u7A33\u5B9A\u5BFC\u81F4\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u8C03\u6574\uFF1A</p><p>\u672C\u5730\u90E8\u7F72\u65F6\uFF0C\u8C03\u6574<code>pypi</code>\u4E0B\u8F7D\u6E90\u914D\u7F6E\u65B9\u5F0F\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mkdir ~/.pip/
echo &quot;[global]\\nindex-url = https://mirrors.cloud.tencent.com/pypi/simple&quot; &gt;&gt; ~/.pip/pip.conf
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Docker-Compose\u90E8\u7F72\u65F6\uFF0C\u8C03\u6574<code>pypi</code>\u4E0B\u8F7D\u6E90\u914D\u7F6E\u65B9\u5F0F\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>vi server/dockerconfs/Dockerfile-common
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u8C03\u6574\u6587\u4EF6\u4E2D\u6700\u540E\u4E00\u884C <code>RUN</code>\u6307\u4EE4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>RUN mkdir -p log/ &amp;&amp; \\
    mkdir ~/.pip/ &amp;&amp; \\
    echo &quot;[global]\\nindex-url = https://mirrors.cloud.tencent.com/pypi/simple&quot; &gt;&gt; ~/.pip/pip.conf &amp;&amp; \\
    pip install -U setuptools pip &amp;&amp; \\
    pip install -r requirements.txt
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>\u6CE8\uFF1A\u5982\u679C\u9700\u8981\u6307\u5B9A\u5176\u4ED6<code>pypi</code>\u4E0B\u8F7D\u6E90\uFF0C\u53EF\u4EE5\u5C06<code>https://mirrors.cloud.tencent.com/pypi/simple</code>\u8FDB\u884C\u66FF\u6362</p><p>\u5982\u679C\u51FA\u73B0\u4EE5\u4E0B\u9519\u8BEF\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>WARNING: Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by &#39;NewConnectionError(&#39;&lt;pip._vendor.urllib3.connection.HTTPSConnection object at 0x7f6d4ac24910&gt;: Failed to establish a new connection: [Errno -3] Temporary failure in name resolution&#39;)&#39;: /simple/setuptools/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u8BE5\u9519\u8BEF\u662F\u65E0\u6CD5\u6B63\u5E38\u89E3\u6790<code>pypi</code>\u8BBF\u95EE\u57DF\u540D\uFF0C\u9700\u8981\u68C0\u67E5\u4E00\u4E0B\u672C\u5730\u7684dns\u914D\u7F6E\u662F\u5426\u6B63\u5E38</p><h4 id="_1-2-docker\u672A\u5B89\u88C5\u6216\u7248\u672C\u8FC7\u4F4E" tabindex="-1"><a class="header-anchor" href="#_1-2-docker\u672A\u5B89\u88C5\u6216\u7248\u672C\u8FC7\u4F4E" aria-hidden="true">#</a> 1.2 Docker\u672A\u5B89\u88C5\u6216\u7248\u672C\u8FC7\u4F4E</h4><p>TCA Server\u4F7F\u7528Docker-Compose\u4F9D\u8D56\u7684Docker\u7248\u672C\u9700\u8981\u662F<code>1.13.0</code>\u53CA\u4EE5\u4E0A\uFF0C\u53EF\u4EE5\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\u67E5\u770BDocker\u7248\u672C</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ docker --version
Docker version 18.09.7, build 2d0083d
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>\u6587\u6863\u76F8\u5173\uFF1A</p>`,20),W={href:"https://docs.docker.com/compose/compose-file/compose-versioning/",target:"_blank",rel:"noopener noreferrer"},Q=o("Compose\u6587\u4EF6\u7248\u672C\u4E0E\u5BF9\u5E94\u7684Docker\u7248\u672C\u8BF4\u660E\u6587\u6863"),z={href:"https://docs.docker.com/engine/install/centos/",target:"_blank",rel:"noopener noreferrer"},X=o("CentOS\u5B89\u88C5Docker\u5B98\u65B9\u6587\u6863"),J={href:"https://docs.docker.com/engine/install/ubuntu/",target:"_blank",rel:"noopener noreferrer"},Y=o("Ubuntu\u5B89\u88C5Docker\u6587\u6863"),Z=r(`<h4 id="_1-3-docker-compose\u542F\u52A8\u5931\u8D25" tabindex="-1"><a class="header-anchor" href="#_1-3-docker-compose\u542F\u52A8\u5931\u8D25" aria-hidden="true">#</a> 1.3 Docker-Compose\u542F\u52A8\u5931\u8D25</h4><p>\u5982\u679C\u542F\u52A8Docker-Compose\u8F93\u51FA\u4EE5\u4E0B\u9519\u8BEF\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>* Error response from daemon: Error processing tar file(exit status 1): unexpected EOF
* Error response from daemon: Error processing tar file(exit status 1): unexpected EOF
* Error response from daemon: Error processing tar file(exit status 1): unexpected EOF
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>\u95EE\u9898\u539F\u56E0\uFF1A\u53EF\u80FD\u955C\u50CF\u6784\u5EFA\u76EE\u5F55\u6743\u9650\u4E0D\u8DB3\uFF0C\u5BFC\u81F4\u5F02\u5E38\u3002 \u89E3\u51B3\u65B9\u6848\uFF1A</p><ol><li>\u6267\u884C<code>docker-compose build</code>\u53EF\u4EE5\u901A\u8FC7\u65E5\u5FD7\u67E5\u770B\u662F\u54EA\u4E2A\u955C\u50CF\u6784\u5EFA\u5F02\u5E38</li><li>\u5207\u6362\u5230\u5177\u4F53\u76EE\u5F55\u6267\u884C<code>docker build .</code>\u53EF\u4EE5\u770B\u5230\u8BE6\u7EC6\u9519\u8BEF\u4FE1\u606F\uFF0C\u7ED3\u5408\u5177\u4F53\u9519\u8BEF\u4FE1\u606F\u8FDB\u884C\u5904\u7406</li><li>\u6536\u96C6\u5E38\u89C1\u7684\u9519\u8BEF\u65E5\u5FD7\uFF0C\u6574\u7406\u76F8\u5173\u89E3\u51B3\u65B9\u6848(\u6CE8\uFF1A\u6B22\u8FCE\u5927\u5BB6\u8865\u5145)</li></ol><p>\u6587\u6863\u76F8\u5173\uFF1A</p>`,6),ee={href:"https://docs.docker.com/compose/install/",target:"_blank",rel:"noopener noreferrer"},oe=o("Docker-Compose\u5B98\u65B9\u5B89\u88C5\u6587\u6863"),ne={href:"https://docs.docker.com/compose/cli-command/",target:"_blank",rel:"noopener noreferrer"},se=o("Docker-ComposeV2\u5B98\u65B9\u5B89\u88C5\u6587\u6863"),le=r(`<h4 id="_1-4-docker\u955C\u50CF\u6E90\u4E0B\u8F7D\u8D85\u65F6\u6216\u5931\u8D25" tabindex="-1"><a class="header-anchor" href="#_1-4-docker\u955C\u50CF\u6E90\u4E0B\u8F7D\u8D85\u65F6\u6216\u5931\u8D25" aria-hidden="true">#</a> 1.4 Docker\u955C\u50CF\u6E90\u4E0B\u8F7D\u8D85\u65F6\u6216\u5931\u8D25</h4><p>\u76EE\u524DTCA\u57FA\u7840\u955C\u50CF\u662F\u4F7F\u7528<code>python:3.7.12-slim</code>\uFF0C\u8BE5\u955C\u50CF\u662F\u57FA\u4E8E<code>debian bullseye(debian 11)</code>\u7248\u672C\u6784\u5EFA\u7684\uFF0C\u5BF9\u5E94\u7684\u6E90\u9700\u8981\u9009\u62E9 <code>bullseye</code> \u7248\u672C\u7684\u6E90\u3002</p><p>\u5982\u679C\u4F7F\u7528\u9ED8\u8BA4\u7684\u4E0B\u8F7D\u6E90\u4F1A\u62A5\u9519\u6216\u8BBF\u95EE\u901F\u5EA6\u6BD4\u8F83\u6162\uFF0C\u53EF\u4EE5\u8C03\u6574<code>server/dockerconfs/Dockerfile-common</code>\uFF0C\u6307\u5B9A\u5176\u4ED6\u56FD\u5185\u4E0B\u8F7D\u6E90\uFF1A</p><div class="language-DockerFile ext-DockerFile line-numbers-mode"><pre class="language-DockerFile"><code># FROM python:3.7.12-slim

# \u589E\u52A0\u4E00\u4E0B\u5185\u5BB9\u7528\u4E8E\u6307\u5B9A\u4E0B\u8F7D\u6E90
RUN mv /etc/apt/sources.list /etc/apt/sources.list.bak &amp;&amp; \\
    echo &#39;deb http://mirrors.tencent.com/debian/ bullseye main non-free contrib&#39; &gt; /etc/apt/sources.list &amp;&amp; \\
    echo &#39;deb http://mirrors.tencent.com/debian/ bullseye-updates main non-free contrib&#39; &gt;&gt; /etc/apt/sources.list &amp;&amp; \\
    echo &#39;deb http://mirrors.tencent.com/debian-security bullseye-security main non-free contrib&#39; &gt;&gt; /etc/apt/sources.list

# ARG EXTRA_TOOLS=...
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>\u5982\u679C\u51FA\u73B0\u4EE5\u4E0B\u9519\u8BEF\uFF1A<code>E: Error, pkgProblemResolver::Resolve generated breaks, this may be caused by held packages</code> \u53EF\u4EE5\u505A\u4EE5\u4E0B\u68C0\u67E5\uFF0C\u786E\u8BA4\u662F\u4EC0\u4E48\u539F\u56E0\uFF1A</p><ol><li>\u68C0\u67E5\u4E00\u4E0B\u672C\u5730\u670D\u52A1\u5668\u7684\u65F6\u95F4\u914D\u7F6E\u662F\u5426\u6B63\u5E38</li><li>\u8C03\u6574\u4E0B\u8F7D\u6E90</li></ol><h4 id="_1-5-python\u5B89\u88C5\u6216\u6267\u884C\u5931\u8D25" tabindex="-1"><a class="header-anchor" href="#_1-5-python\u5B89\u88C5\u6216\u6267\u884C\u5931\u8D25" aria-hidden="true">#</a> 1.5 Python\u5B89\u88C5\u6216\u6267\u884C\u5931\u8D25</h4><p>\u4F7F\u7528Python\u6267\u884C\u65F6\u63D0\u793A<code>ImportError: libpython3.7m.so.1.0: cannot open shared object file: No such file or directory</code>\uFF0C\u8BE5\u5982\u4F55\u5904\u7406</p><ol><li><p>\u5728\u672C\u5730\u5B89\u88C5Python\u7684\u76EE\u5F55\u4E2D\u67E5\u627E\u8BE5\u6587\u4EF6\uFF0C\u6BD4\u5982Python\u7684\u5B89\u88C5\u76EE\u5F55\u662F<code>/usr/local/python3</code>\uFF0C\u53EF\u4EE5\u6267\u884C<code>find /usr/local/python3 -name &quot;libpython3.7m.so.1.0&quot;</code>\uFF0C\u786E\u8BA4\u672C\u5730\u662F\u5426\u5B58\u5728\u8BE5\u6587\u4EF6</p></li><li><p>\u5982\u679C\u672C\u5730\u5B58\u5728\u8BE5\u6587\u4EF6\uFF0C\u5219\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\uFF1A\uFF08\u6CE8\uFF1A\u9700\u8981\u5C06<code>/usr/local/python3</code>\u8C03\u6574\u4E3A\u672C\u5730\u5B9E\u9645\u7684Python3\u5B89\u88C5\u8DEF\u5F84\uFF09</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code># \u94FE\u63A5\u6784\u5EFA\u4EA7\u51FA\u7684Python\u52A8\u6001\u5E93
$ ln -s /usr/local/python3/lib/libpython3.7m.so.1.0 /usr/lib/libpython3.7m.so.1.0
# \u914D\u7F6E\u52A8\u6001\u5E93
$ ldconfig
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>\u5982\u679C\u672C\u5730\u4E0D\u5B58\u5728\u8BE5\u6587\u4EF6\uFF0C\u5219\u53EF\u80FD\u9700\u8981\u91CD\u65B0\u5B89\u88C5Python3\uFF1A\uFF08\u6CE8\uFF1A\u4EE5\u4E0B\u662F\u5C06Python\u5B89\u88C5\u5230<code>/usr/local/python3</code>\uFF0C\u53EF\u4EE5\u6839\u636E\u5B9E\u9645\u60C5\u51B5\u8FDB\u884C\u8C03\u6574\uFF09</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code># \u7F16\u8BD1\u524D\u914D\u7F6E\uFF0C\u6CE8\u610F\u91CD\u70B9\uFF1A\u9700\u8981\u52A0\u4E0A\u53C2\u6570 --enable-shared
$ ./configure prefix=/usr/local/python3 --enable-shared
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol><p>\u6587\u6863\u76F8\u5173\uFF1A</p>`,10),ae={href:"https://github.com/Tencent/CodeAnalysis/blob/main/doc/references/install_python37_on_centos.md",target:"_blank",rel:"noopener noreferrer"},re=o("CentOS\u5B89\u88C5Python3.7\u6587\u6863"),ce={href:"https://github.com/Tencent/CodeAnalysis/blob/main/doc/references/install_python37_on_ubuntu.md",target:"_blank",rel:"noopener noreferrer"},ie=o("Ubuntu\u5B89\u88C5Python3.7\u6587\u6863"),de=r(`<h4 id="_1-6-\u6267\u884Ccompose-init-sh\u811A\u672C\u7684pip-install\u63D0\u793Asha256\u4E0D\u5339\u914D\u9519\u8BEF" tabindex="-1"><a class="header-anchor" href="#_1-6-\u6267\u884Ccompose-init-sh\u811A\u672C\u7684pip-install\u63D0\u793Asha256\u4E0D\u5339\u914D\u9519\u8BEF" aria-hidden="true">#</a> 1.6 \u6267\u884C<code>compose_init.sh</code>\u811A\u672C\u7684<code>pip install</code>\u63D0\u793A<code>sha256</code>\u4E0D\u5339\u914D\u9519\u8BEF</h4><p>\u5728\u6784\u5EFA\u955C\u50CF\u7684<code>pip install</code>\u6B65\u9AA4\u63D0\u793A\u4EE5\u4E0B\u62A5\u9519\u65F6\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ERROR: THESE PACKAGES DO NOT MATCH THE HASHES FROM THE REQUIREMENTS FILE. If you have updated the package versions, please update the hashes. Otherwise, examine the package contents carefully; someone may have tampered with them.
    setuptools from https://mirrors.cloud.tencent.com/pypi/packages/fb/58/9efbfe68482dab9557c49d433a60fff9efd7ed8835f829eba8297c2c124a/setuptools-62.1.0-py3-none-any.whl#sha256=26ead7d1f93efc0f8c804d9fafafbe4a44b179580a7105754b245155f9af05a8:
        Expected sha256 26ead7d1f93efc0f8c804d9fafafbe4a44b179580a7105754b245155f9af05a8
             Got        ddaacc49de5c08c09d744573240a9a49f24f65c5c72380e972433784caa68d98
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u53EF\u4EE5\u6267\u884C<code>export ORIGIN=normal</code>\uFF0C\u7136\u540E\u518D\u6267\u884C<code>./compose_init.sh</code></p><blockquote><p>\u6CE8\uFF1A\u6267\u884C<code>export</code>\u547D\u4EE4\u7684\u4F5C\u7528\u662F\u8C03\u6574\u4E3A<code>pypi</code>\u9ED8\u8BA4\u5B98\u65B9\u4E0B\u8F7D\u6E90\u8FDB\u884C<code>pip install</code></p></blockquote><h4 id="_1-7-macbook-m1-\u4F7F\u7528-docker-compose\u62A5\u9519" tabindex="-1"><a class="header-anchor" href="#_1-7-macbook-m1-\u4F7F\u7528-docker-compose\u62A5\u9519" aria-hidden="true">#</a> 1.7 MacBook M1 \u4F7F\u7528 Docker-Compose\u62A5\u9519</h4><p>\u5728M1\u673A\u5668\u4E0A\u4F7F\u7528\u9ED8\u8BA4\u914D\u7F6E\u542F\u52A8docker-compose\uFF0C\u4F1A\u51FA\u73B0<code>mysql</code>\u548C<code>scmproxy</code>\u670D\u52A1\u542F\u52A8\u5931\u8D25\uFF0C\u9700\u8981\u505A\u4EE5\u4E0B\u4E24\u6B65\u8C03\u6574</p><ol><li><p>\u8C03\u6574<code>docker-compose.yml</code>\u6587\u4EF6\uFF0C\u4FEE\u6539MySQL\u7684\u955C\u50CF\u7248\u672C\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code># \u9ED8\u8BA4\uFF1A
image: mysql:5.7.24

# \u8C03\u6574\u540E\uFF1A
image: mariadb:10.5.8
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>\u8C03\u6574<code>server/dockerconfs/Dockerfile-common</code>\u6587\u4EF6\uFF0C\u4FEE\u6539Python\u7684\u955C\u50CF\u7248\u672C\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code># \u9ED8\u8BA4\uFF1A
FROM python:3.7.12-slim

# \u8C03\u6574\u540E\uFF1A
FROM amd64/python:3.7.12-slim
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol><h4 id="_1-8-celery\u3001gunicorn\u547D\u4EE4\u627E\u4E0D\u5230" tabindex="-1"><a class="header-anchor" href="#_1-8-celery\u3001gunicorn\u547D\u4EE4\u627E\u4E0D\u5230" aria-hidden="true">#</a> 1.8 celery\u3001gunicorn\u547D\u4EE4\u627E\u4E0D\u5230</h4><p>\u5982\u679C\u542F\u52A8\u670D\u52A1\u65F6\uFF0C\u63D0\u793A\uFF1A<code>celery could not be found</code>\u6216<code>gunicorn could not be found</code>\uFF0C\u9700\u8981\u505A\u4EE5\u4E0B\u68C0\u67E5</p><ol><li>\u6267\u884C<code>python -v</code>\u68C0\u67E5\u8F93\u51FA\uFF0C\u786E\u8BA4\u5F53\u524Dpython\u7248\u672C\u662F\u5426\u4E3Apython3.7</li><li>\u6267\u884C<code>pip install celery</code>\u548C<code>pip install gunicorn</code>\u68C0\u67E5celery\u548Cgunicorn\u662F\u5426\u5DF2\u7ECF\u5B89\u88C5</li><li>\u5982\u679C\u5DF2\u7ECF\u5B89\u88C5\uFF0C\u53EF\u4EE5\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\u5EFA\u7ACB\u8F6F\u94FE\uFF1A\uFF08\u6CE8\uFF1A\u9700\u8981\u5C06<code>/usr/local/python3</code>\u8C03\u6574\u4E3A\u672C\u5730\u5B9E\u9645\u7684Python3\u5B89\u88C5\u8DEF\u5F84\uFF09</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>ln -s /usr/local/python3/bin/gunicorn /usr/local/bin/gunicorn
ln -s /usr/local/python3/bin/celery /usr/local/bin/celery
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2-\u670D\u52A1\u542F\u52A8\u4E0E\u521D\u59CB\u5316" tabindex="-1"><a class="header-anchor" href="#_2-\u670D\u52A1\u542F\u52A8\u4E0E\u521D\u59CB\u5316" aria-hidden="true">#</a> 2. \u670D\u52A1\u542F\u52A8\u4E0E\u521D\u59CB\u5316</h3><h4 id="_2-1-compose-init-sh\u811A\u672C\u9700\u8981\u586B\u5199\u7684\u5BC6\u7801\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_2-1-compose-init-sh\u811A\u672C\u9700\u8981\u586B\u5199\u7684\u5BC6\u7801\u662F\u4EC0\u4E48" aria-hidden="true">#</a> 2.1 <code>compose_init.sh</code>\u811A\u672C\u9700\u8981\u586B\u5199\u7684\u5BC6\u7801\u662F\u4EC0\u4E48\uFF1F</h4><p>\u6267\u884C<code>compose_init.sh</code>\u63D0\u793A\u9700\u8981\u8F93\u5165\u7684\u5BC6\u7801\u662F\u6570\u636E\u5E93\u7684\u521D\u59CB\u5316\u5BC6\u7801\uFF0C\u9ED8\u8BA4\u4E3A<code>TCA!@#2021</code></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ ./compose_init.sh
Recreating tca_open_source_mysql_1 ... done
Recreating tca_open_source_redis_1 ... done
wait db [DB default password: TCA!@#2021]
Enter password: &lt;\u6B64\u5904\u8F93\u5165&#39;TCA!@#2021&#39;&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_2-2-\u670D\u52A1\u5360\u7528\u7AEF\u53E3\u5F02\u5E38" tabindex="-1"><a class="header-anchor" href="#_2-2-\u670D\u52A1\u5360\u7528\u7AEF\u53E3\u5F02\u5E38" aria-hidden="true">#</a> 2.2 \u670D\u52A1\u5360\u7528\u7AEF\u53E3\u5F02\u5E38</h4><p>TCA \u672C\u5730\u90E8\u7F72\u542F\u52A8\u540E\uFF0C\u4F1A\u76D1\u542C\u591A\u4E2A\u7AEF\u53E3\uFF1A</p><ul><li>web\u670D\u52A1\uFF1A80</li><li>nginx\u670D\u52A1\uFF1A8000</li><li>main\u670D\u52A1\uFF1A8001</li><li>analysis\u670D\u52A1\uFF1A8002</li><li>login\u670D\u52A1\uFF1A8003</li><li>file-nginx\u670D\u52A1\uFF1A8004</li><li>file\u670D\u52A1\uFF1A8804</li><li>scmproxy\u670D\u52A1\uFF1A8009</li></ul><p>\u5982\u679C\u51FA\u73B0\u7AEF\u53E3\u5360\u7528\u51B2\u7A81\uFF0C\u5EFA\u8BAE\u91C7\u7528\u4EE5\u4E0B\u65B9\u5F0F\u89E3\u51B3\uFF1A</p><ol><li>\u8C03\u6574\u5176\u4ED6\u7A0B\u5E8F\u76D1\u542C\u7684\u7AEF\u53E3\u53F7\uFF0C\u907F\u514D\u8DDF\u4E0A\u8FF0TCA\u670D\u52A1\u7684\u7AEF\u53E3\u53F7\u51FA\u73B0\u51B2\u7A81</li><li>\u91C7\u7528Docker-Compose\u65B9\u5F0F\u542F\u52A8TCA\uFF0C\u4EC5\u76D1\u542C80\u7AEF\u53E3</li></ol><p>\u4E0D\u63A8\u8350\u8C03\u6574TCA\u6307\u5B9A\u670D\u52A1\u7684\u7AEF\u53E3\u53F7\uFF0C\u9700\u8981\u8C03\u6574\u591A\u5904\u914D\u7F6E\uFF0C\u4EE5\u53CA\u53EF\u80FD\u4F1A\u5F71\u54CD\u5230\u540E\u7EED\u670D\u52A1\u7684\u5347\u7EA7</p><h4 id="_2-3-\u670D\u52A1\u8F93\u51FA\u65E5\u5FD7\u627E\u4E0D\u5230" tabindex="-1"><a class="header-anchor" href="#_2-3-\u670D\u52A1\u8F93\u51FA\u65E5\u5FD7\u627E\u4E0D\u5230" aria-hidden="true">#</a> 2.3 \u670D\u52A1\u8F93\u51FA\u65E5\u5FD7\u627E\u4E0D\u5230</h4><p>\u672C\u5730\u90E8\u7F72\u8F93\u51FA\u7684\u65E5\u5FD7\u4F4D\u7F6E\uFF1A</p><ol><li><code>main</code>\u670D\u52A1\u8F93\u51FA\u7684\u65E5\u5FD7\u76EE\u5F55\uFF1A<code>server/projects/main/log</code><ul><li>\u670D\u52A1\u542F\u52A8\u65E5\u5FD7\uFF1A<code>server/projects/main/log/gunicorn_error.log</code></li><li>\u670D\u52A1\u63A5\u6536\u8BF7\u6C42\u65E5\u5FD7\uFF1A<code>server/projects/main/log/gunicorn_access.log</code></li><li>Celery Worker\u542F\u52A8\u65E5\u5FD7\uFF08\u5904\u7406\u5F02\u6B65\u4EFB\u52A1\uFF09\uFF1A<code>server/projects/main/nohup_worker.out</code></li><li>Celery Beat\u542F\u52A8\u65E5\u5FD7\uFF08\u542F\u52A8\u5B9A\u65F6\u4EFB\u52A1\uFF09\uFF1A<code>server/projects/main/nohup_beat.out</code></li><li>\u670D\u52A1\u8FD0\u884C\u65E5\u5FD7\uFF1A<code>server/projects/main/log/codedog.log</code></li><li>Celery Worker\u8FD0\u884C\u65E5\u5FD7\uFF1A<code>server/projects/main/log/main_celery.log</code></li><li>Celery Beat\u8FD0\u884C\u65E5\u5FD7\uFF1A<code>server/projects/main/log/main_beat.log</code></li></ul></li><li><code>analysis</code>\u670D\u52A1\u8F93\u51FA\u7684\u65E5\u5FD7\u76EE\u5F55\uFF1A<code>server/projects/analysis/log</code><ul><li>\u670D\u52A1\u542F\u52A8\u65E5\u5FD7\uFF1A<code>server/projects/analysis/log/gunicorn_error.log</code></li><li>Celery Worker\u542F\u52A8\u65E5\u5FD7\uFF1A<code>server/projects/analysis/nohup.out</code></li><li>\u670D\u52A1\u63A5\u6536\u8BF7\u6C42\u65E5\u5FD7\uFF1A<code>server/projects/analysis/log/gunicorn_access.log</code></li><li>\u670D\u52A1\u8FD0\u884C\u65E5\u5FD7\uFF1A<code>server/projects/analysis/log/codedog.log</code></li><li>Celery Worker\u8FD0\u884C\u65E5\u5FD7\uFF08\u5904\u7406\u7ED3\u679C\u5165\u5E93\uFF09\uFF1A<code>server/projects/analysis/log/celery.log</code></li></ul></li><li><code>login</code>\u670D\u52A1\u8F93\u51FA\u7684\u65E5\u5FD7\u76EE\u5F55\uFF1A<code>server/projects/login/log</code><ul><li>\u670D\u52A1\u542F\u52A8\u65E5\u5FD7\uFF1A<code>server/projects/login/log/gunicorn_error.log</code></li><li>\u670D\u52A1\u63A5\u6536\u8BF7\u6C42\u65E5\u5FD7\uFF1A<code>server/projects/login/log/gunicorn_access.log</code></li><li>\u670D\u52A1\u8FD0\u884C\u65E5\u5FD7\uFF1A<code>server/projects/login/log/codedog.log</code></li></ul></li><li><code>file</code>\u670D\u52A1\u8F93\u51FA\u7684\u65E5\u5FD7\u76EE\u5F55\uFF1A<code>server/projects/file/log</code><ul><li>\u670D\u52A1\u542F\u52A8\u65E5\u5FD7\uFF1A<code>server/projects/file/log/gunicorn_error.log</code></li><li>\u670D\u52A1\u63A5\u6536\u8BF7\u6C42\u65E5\u5FD7\uFF1A<code>server/projects/file/log/gunicorn_access.log</code></li><li>\u670D\u52A1\u8FD0\u884C\u65E5\u5FD7\uFF1A<code>server/projects/file/log/codedog_file.log</code></li></ul></li><li><code>scmproxy</code>\u670D\u52A1\u8F93\u51FA\u7684\u65E5\u5FD7\u76EE\u5F55\uFF1A<code>server/projects/scmproxy/logs</code><ul><li>\u670D\u52A1\u542F\u52A8\u65E5\u5FD7\uFF1A<code>server/projects/scmproxy/nohup.out</code></li><li>\u670D\u52A1\u8FD0\u884C\u65E5\u5FD7\uFF1A<code>server/projects/scmproxy/logs/scmproxy.log</code></li></ul></li></ol><h3 id="_3-\u5E73\u53F0\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_3-\u5E73\u53F0\u4F7F\u7528" aria-hidden="true">#</a> 3. \u5E73\u53F0\u4F7F\u7528</h3><h4 id="_3-1-\u5E73\u53F0\u767B\u5F55\u7684\u9ED8\u8BA4\u8D26\u53F7\u5BC6\u7801\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_3-1-\u5E73\u53F0\u767B\u5F55\u7684\u9ED8\u8BA4\u8D26\u53F7\u5BC6\u7801\u662F\u4EC0\u4E48" aria-hidden="true">#</a> 3.1 \u5E73\u53F0\u767B\u5F55\u7684\u9ED8\u8BA4\u8D26\u53F7\u5BC6\u7801\u662F\u4EC0\u4E48\uFF1F</h4><p>\u9ED8\u8BA4\u8D26\u53F7: <code>CodeDog</code>\uFF0C\u5BC6\u7801: <code>admin</code></p><h4 id="_3-2-\u5E73\u53F0\u9ED8\u8BA4\u7684api-token\u662F\u4EC0\u4E48" tabindex="-1"><a class="header-anchor" href="#_3-2-\u5E73\u53F0\u9ED8\u8BA4\u7684api-token\u662F\u4EC0\u4E48" aria-hidden="true">#</a> 3.2 \u5E73\u53F0\u9ED8\u8BA4\u7684API Token\u662F\u4EC0\u4E48\uFF1F</h4><p>\u9ED8\u8BA4Token\u662F<code>0712b895f30c5e958ec71a7c22e1b1a2ad1d5c6b</code></p><p>\u5982\u679C\u5728\u5E73\u53F0\u4E0A\u5237\u65B0\u4E86<code>CodeDog</code>\u7528\u6237\u7684Token\uFF0C\u9700\u8981\u5C06\u5237\u65B0\u540E\u7684Token\u586B\u5199\u5230\u4EE5\u4E0B\u6587\u4EF6\u4E2D\uFF1A</p><ol><li><code>server/scripts/config.sh</code>\u6587\u4EF6 <ul><li>\u66F4\u65B0<code>CODEDOG_TOKEN</code>\u3001<code>FILE_SERVER_TOKEN</code>\u53D8\u91CF\u7684\u503C\uFF083\u4E2A\u4F4D\u7F6E\uFF09</li></ul></li><li><code>server/dockerconfs/.env.local</code>\u6587\u4EF6 <ul><li>\u66F4\u65B0<code>CODEDOG_TOKEN</code>\u3001<code>FILE_SERVER_TOKEN</code>\u53D8\u91CF\u7684\u503C\uFF083\u4E2A\u4F4D\u7F6E\uFF09</li></ul></li></ol><p>\u7136\u540E\u91CD\u542F\u670D\u52A1\u3002</p><ol><li><p>\u672C\u5730\u90E8\u7F72\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>cd server/
./scripts/deploy.sh start
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>docker-compose\u90E8\u7F72\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ docker-compose stop
# \u7A0D\u7B49\u7247\u523B
$ docker-compose up -d
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ol><h4 id="_3-3-\u4EE3\u7801\u5E93\u767B\u8BB0\u51FA\u9519-\u51FA\u73B0\u4EE3\u7801\u5E93\u53CA\u8D26\u53F7\u4E0D\u5339\u914D" tabindex="-1"><a class="header-anchor" href="#_3-3-\u4EE3\u7801\u5E93\u767B\u8BB0\u51FA\u9519-\u51FA\u73B0\u4EE3\u7801\u5E93\u53CA\u8D26\u53F7\u4E0D\u5339\u914D" aria-hidden="true">#</a> 3.3 \u4EE3\u7801\u5E93\u767B\u8BB0\u51FA\u9519\uFF0C\u51FA\u73B0\u4EE3\u7801\u5E93\u53CA\u8D26\u53F7\u4E0D\u5339\u914D</h4><p>\u8BE5\u9519\u8BEF\u51FA\u73B0\u53EF\u80FD\u6709\u4EE5\u4E0B\u51E0\u4E2A\u539F\u56E0\uFF1A</p>`,36),te=e("li",null,"\u8D26\u53F7\u5BC6\u7801\u4E0D\u51C6\u786E\u6216\u767B\u8BB0\u7684\u4EE3\u7801\u5E93\u5730\u5740\u4E0D\u5B58\u5728",-1),pe=o("\u767B\u8BB0"),ue=e("code",null,"github",-1),he=o("\u4F7F\u7528\u7684\u5BC6\u7801\u9700\u8981\u4F7F\u7528"),me={href:"https://github.com/settings/tokens",target:"_blank",rel:"noopener noreferrer"},be=e("code",null,"personal access token",-1),_e=r("<li>scmproxy\u670D\u52A1\u542F\u52A8\u5931\u8D25 <ul><li>\u672C\u5730\u90E8\u7F72\uFF1A\u6267\u884C<code>ps aux | grep proxyserver</code>\u770B\u770B\u662F\u5426\u6709<code>python proxyserver.py</code>\u6267\u884C\u8FDB\u7A0B\uFF0C\u5982\u679C\u4E0D\u5B58\u5728\u53EF\u4EE5\u770B\u4E00\u4E0B<code>server/projects/scmproxy/nohup.out</code>\u770B\u770B\u542F\u52A8\u5931\u8D25\u7684\u539F\u56E0</li><li>docker-compose\u90E8\u7F72\uFF1A\u5728\u9879\u76EE\u6839\u76EE\u5F55\u6267\u884C<code>docker-compose ps</code>\u770B\u770B<code>scmproxy</code>\u5BB9\u5668\u662F\u5426\u6B63\u5E38\u542F\u52A8\uFF0C\u5982\u679C\u6CA1\u6709\u542F\u52A8\uFF0C\u53EF\u4EE5\u6267\u884C<code>docker-compose logs scmproxy</code>\u770B\u770B\u542F\u52A8\u5931\u8D25\u7684\u539F\u56E0</li></ul></li><li>scmproxy\u6240\u5728\u7684\u673A\u5668/\u5BB9\u5668\u56E0\u4E3A\u7F51\u7EDC\u95EE\u9898\u65E0\u6CD5\u8BBF\u95EE\u5BF9\u5E94\u7684\u4EE3\u7801\u5E93 <ul><li>\u53EF\u4EE5\u624B\u52A8\u5728\u673A\u5668/\u5BB9\u5668\u4E2D\u6267\u884C<code>git clone xxxx</code>\uFF08xxx\u8868\u793A\u5F85\u767B\u8BB0\u7684\u4EE3\u7801\u5E93\uFF09\uFF0C\u68C0\u67E5\u770B\u770B\u662F\u5426\u80FD\u591F\u6B63\u5E38\u62C9\u53D6</li></ul></li><li>scmproxy\u6240\u5728\u7684\u673A\u5668git\u7248\u672C\u8F83\u4F4E\uFF0C\u51FA\u73B0<code>unknown option `local` </code>\u9519\u8BEF <ul><li>\u53EF\u4EE5\u5347\u7EA7\u673A\u5668\u4E0A\u7684git\u7248\u672C\uFF0C\u76EE\u524D\u5DE5\u5177\u652F\u6301\u6700\u4F4E\u7684git\u7248\u672C\u4E3A<code>1.8.3.1</code></li></ul></li>",3),ge=r(`<h4 id="_3-4-\u67E5\u770B\u95EE\u9898\u6587\u4EF6\u63D0\u793A\u83B7\u53D6\u4EE3\u7801\u4FE1\u606F\u8017\u65F6\u8F83\u4E45-\u8BF7\u7A0D\u540E\u518D\u8BD5" tabindex="-1"><a class="header-anchor" href="#_3-4-\u67E5\u770B\u95EE\u9898\u6587\u4EF6\u63D0\u793A\u83B7\u53D6\u4EE3\u7801\u4FE1\u606F\u8017\u65F6\u8F83\u4E45-\u8BF7\u7A0D\u540E\u518D\u8BD5" aria-hidden="true">#</a> 3.4 \u67E5\u770B\u95EE\u9898\u6587\u4EF6\u63D0\u793A<strong>\u83B7\u53D6\u4EE3\u7801\u4FE1\u606F\u8017\u65F6\u8F83\u4E45\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5</strong></h4><p>\u51FA\u73B0\u8BE5\u63D0\u793A\u7684\u539F\u56E0\u662F\uFF0C\u4EE3\u7801\u5E93\u504F\u5927\u6216<code>clone</code>\u4EE3\u7801\u5E93\u65F6\u95F4\u8F83\u957F\uFF0C\u53EF\u4EE5\u7A0D\u7B49\u4E00\u4F1A\u518D\u5237\u65B0\u91CD\u8BD5</p><h4 id="_3-5-\u5BA2\u6237\u7AEF\u8BBF\u95EE\u6587\u4EF6\u670D\u52A1\u5668-\u63D0\u793Amethod-upload-file-call-fails-on-error-expecting-value-line-1-column-1-char-0" tabindex="-1"><a class="header-anchor" href="#_3-5-\u5BA2\u6237\u7AEF\u8BBF\u95EE\u6587\u4EF6\u670D\u52A1\u5668-\u63D0\u793Amethod-upload-file-call-fails-on-error-expecting-value-line-1-column-1-char-0" aria-hidden="true">#</a> 3.5 \u5BA2\u6237\u7AEF\u8BBF\u95EE\u6587\u4EF6\u670D\u52A1\u5668\uFF0C\u63D0\u793A<code>method(upload_file) call fails on error: Expecting value: line 1 column 1 (char 0)</code></h4><p>\u51FA\u73B0\u8FD9\u79CD\u9519\u8BEF\uFF0C\u53EF\u80FD\u662F\u672C\u5730\u914D\u7F6E\u5F02\u5E38\u6216token\u914D\u7F6E\u6709\u95EE\u9898\uFF0C\u68C0\u67E5\u65B9\u5F0F\u5982\u4E0B\uFF1A</p><ol><li><p>\u68C0\u67E5\u5BA2\u6237\u7AEF\u7684<code>config.ini</code>\u6587\u4EF6\u914D\u7F6E\u7684URL\u662F\u5426\u4E3A\u5F53\u524DServer\u90E8\u7F72\u7684\u5730\u5740\uFF1A\uFF08xxx\u9700\u8981\u8C03\u6574\u4E3A\u5B9E\u9645\u7684\u8DEF\u5F84\uFF09</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>[SERVER_URL]
URL=http://xxx/server/main/
[FILE_SERVER]
URL=http:/xxx/server/files/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>\u5982\u679Cxxx\u4E0D\u4E00\u81F4\u9700\u8981\u8C03\u6574\u4E3A\u4E00\u81F4</p><blockquote><p>\u6CE8: xxx\u5730\u5740\u4E0E\u5728\u6D4F\u89C8\u5668\u8BBF\u95EE\u5E73\u53F0\u7684xxx\u5730\u5740\u662F\u4E00\u81F4\u7684\uFF0C\u4E0D\u9700\u8981\u533A\u5206\u7AEF\u53E3</p></blockquote></li><li><p>\u68C0\u67E5\u5BA2\u6237\u7AEF\u8BBF\u95EEServer\u662F\u5426\u80FD\u901A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>curl -v http://xxx/server/main/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u5982\u679C\u4E0D\u901A\uFF0C\u5219\u9700\u8981\u68C0\u67E5\u5BA2\u6237\u7AEF\u673A\u5668\u8BBF\u95EEServer\u673A\u5668\u662F\u5426\u6709\u7F51\u7EDC\u9650\u5236</p></li><li><p>\u68C0\u67E5\u5F53\u524D\u5728<code>codedog.ini</code>-<code>[config]token</code>\u4E0E<code>config.ini</code>\u6587\u4EF6\u914D\u7F6E\u7684<code>[FILE_SERVER]TOKEN</code>\u662F\u5426\u4E00\u81F4\uFF0C\u5982\u679C\u4E0D\u4E00\u81F4\u9700\u8981\u8C03\u6574\u4E3A\u4E00\u81F4</p></li><li><p>\u68C0\u67E5\u7528\u6237<code>CodeDog</code>\u7684<code>Token</code>\u662F\u5426\u88AB\u5237\u65B0\u4E86\u7136\u540E\u6CA1\u6709\u66F4\u65B0\u5230\u914D\u7F6E\u6587\u4EF6\u4E2D</p></li></ol><h4 id="_3-6-\u5BA2\u6237\u7AEF\u8BBF\u95EE\u6587\u4EF6\u670D\u52A1\u5668-\u63D0\u793Aconnection-timed-out" tabindex="-1"><a class="header-anchor" href="#_3-6-\u5BA2\u6237\u7AEF\u8BBF\u95EE\u6587\u4EF6\u670D\u52A1\u5668-\u63D0\u793Aconnection-timed-out" aria-hidden="true">#</a> 3.6 \u5BA2\u6237\u7AEF\u8BBF\u95EE\u6587\u4EF6\u670D\u52A1\u5668\uFF0C\u63D0\u793A<code>Connection timed out</code></h4><p>\u672C\u5730\u5BA2\u6237\u7AEF\u6267\u884C\u8FC7\u7A0B\u63D0\u793A<code>method (upload file) call fails on error: &lt;urlopen error [Errno 110] Connection timed out&gt;</code> \u8BE5\u5982\u4F55\u5904\u7406\uFF1F \u4E00\u822C\u60C5\u51B5\u4E0B\uFF0C\u8FD9\u4E2A\u95EE\u9898\u662F\u5BA2\u6237\u7AEF\u4E0EServer\u4E4B\u95F4\u7F51\u7EDC\u4E0D\u901A\u5BFC\u81F4\uFF0C\u53EF\u4EE5\u68C0\u67E5\u4E00\u4E0B\u662F\u5426\u6709\u9632\u706B\u5899\u9650\u5236\u6216\u8005\u914D\u7F6E\u7684URL\u662F\u5185\u90E8IP\u6216\u5730\u5740\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u68C0\u67E5</p><ol><li><p>\u68C0\u67E5\u5BA2\u6237\u7AEF\u7684<code>config.ini</code>\u6587\u4EF6\u914D\u7F6E\u7684URL\u662F\u5426\u4E3A\u5F53\u524DServer\u90E8\u7F72\u7684\u5730\u5740\uFF1A\uFF08xxx\u9700\u8981\u8C03\u6574\u4E3A\u5B9E\u9645\u7684\u8DEF\u5F84\uFF09</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>[SERVER_URL]
URL=http://xxx/server/main/
[FILE_SERVER]
URL=http:/xxx/server/files/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>\u68C0\u67E5\u5BA2\u6237\u7AEF\u8BBF\u95EEServer\u662F\u5426\u80FD\u901A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>curl -v http://xxx/server/main/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>\u5982\u679C\u4E0D\u901A\uFF0C\u5219\u9700\u8981\u68C0\u67E5\u5BA2\u6237\u7AEF\u673A\u5668\u8BBF\u95EEServer\u673A\u5668\u662F\u5426\u6709\u7F51\u7EDC\u9650\u5236</p></li></ol><h4 id="_3-7-\u4EFB\u52A1\u6267\u884C\u7ED3\u679C\u5F02\u5E38-\u63D0\u793A\u7B2C\u4E09\u65B9\u4F9D\u8D56\u6587\u4EF6\u670D\u52A1\u5668\u5F02\u5E38" tabindex="-1"><a class="header-anchor" href="#_3-7-\u4EFB\u52A1\u6267\u884C\u7ED3\u679C\u5F02\u5E38-\u63D0\u793A\u7B2C\u4E09\u65B9\u4F9D\u8D56\u6587\u4EF6\u670D\u52A1\u5668\u5F02\u5E38" aria-hidden="true">#</a> 3.7 \u4EFB\u52A1\u6267\u884C\u7ED3\u679C\u5F02\u5E38\uFF0C\u63D0\u793A<strong>\u7B2C\u4E09\u65B9\u4F9D\u8D56\u6587\u4EF6\u670D\u52A1\u5668\u5F02\u5E38</strong></h4><p>\u51FA\u73B0\u8BE5\u9519\u8BEF\u63D0\u793A\uFF0C\u4E00\u822C\u662F\u8BBF\u95EE\u6587\u4EF6\u5668\u51FA\u9519\u6216\u6587\u4EF6\u670D\u52A1\u5668\u672C\u8EAB\u6709\u95EE\u9898\uFF0C\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u68C0\u67E5\uFF1A \u9700\u8981\u68C0\u67E5<code>analysis-worker</code>\u7684\u65E5\u5FD7\uFF08\u672C\u5730\u90E8\u7F72\uFF1A<code>server/projects/analysis/log/celery.log</code>\uFF0Cdocker-compose\u90E8\u7F72\uFF1A<code>docker-compose exec analysis-worker /bin/bash</code>\u8FDB\u5165\u5BB9\u5668\u540E\u8BBF\u95EE<code>log/celery.log</code>\u67E5\u770B\u5177\u4F53\u9519\u8BEF\u539F\u56E0</p><p>\u5982\u679C\u63D0\u793A<code>no route to host</code>\u53EF\u80FD\u662F\u5F53\u524D\u673A\u5668/\u5BB9\u5668\u65E0\u6CD5\u8BBF\u95EE\u5F53\u524D\u5BBF\u4E3B\u673A\u7684IP\uFF0C\u53EF\u4EE5\u68C0\u67E5\u4E00\u4E0B\u5F53\u524D\u9632\u706B\u5899\u7684\u8BBE\u7F6E\uFF0C\u662F\u5426\u9650\u5236\u4E86<code>analysis-worker</code>\u6765\u6E90\u7684\u8BBF\u95EE</p><h4 id="_3-8-\u5BA2\u6237\u7AEF\u6267\u884C\u65F6\u63D0\u793A\u5DE5\u5177-xxx-\u626B\u63CF\u8FDB\u7A0B\u4E3A\u7A7A-\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u914D\u7F6E\u5DE5\u5177\u8FDB\u7A0B" tabindex="-1"><a class="header-anchor" href="#_3-8-\u5BA2\u6237\u7AEF\u6267\u884C\u65F6\u63D0\u793A\u5DE5\u5177-xxx-\u626B\u63CF\u8FDB\u7A0B\u4E3A\u7A7A-\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u914D\u7F6E\u5DE5\u5177\u8FDB\u7A0B" aria-hidden="true">#</a> 3.8 \u5BA2\u6237\u7AEF\u6267\u884C\u65F6\u63D0\u793A<strong>\u5DE5\u5177(xxx)\u626B\u63CF\u8FDB\u7A0B\u4E3A\u7A7A\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u914D\u7F6E\u5DE5\u5177\u8FDB\u7A0B!</strong></h4><p>\u51FA\u73B0\u8BE5\u9519\u8BEF\u63D0\u793A\uFF0C\u4E00\u822C\u662FServer\u672A\u8FDB\u884C\u521D\u59CB\u5316\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\u521D\u59CB\u5316\u540E\u518D\u542F\u52A8\u6D4B\u8BD5</p><ul><li>\u672C\u5730\u90E8\u7F72\uFF1A<code>cd server &amp;&amp; ./scripts/deploy.sh init</code></li><li>docker-compose\u90E8\u7F72\uFF1A<code>./compose_init.sh</code></li></ul><h2 id="codeanalysis\u4ED3\u5E93\u6587\u4EF6\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#codeanalysis\u4ED3\u5E93\u6587\u4EF6\u95EE\u9898" aria-hidden="true">#</a> CodeAnalysis\u4ED3\u5E93\u6587\u4EF6\u95EE\u9898</h2><h3 id="_1-clone\u5230\u672C\u5730\u65F6\u76F8\u5173md\u6587\u4EF6\u5185\u8D44\u6E90\u56FE\u7247\u65E0\u6CD5\u663E\u793A" tabindex="-1"><a class="header-anchor" href="#_1-clone\u5230\u672C\u5730\u65F6\u76F8\u5173md\u6587\u4EF6\u5185\u8D44\u6E90\u56FE\u7247\u65E0\u6CD5\u663E\u793A" aria-hidden="true">#</a> 1. clone\u5230\u672C\u5730\u65F6\u76F8\u5173md\u6587\u4EF6\u5185\u8D44\u6E90\u56FE\u7247\u65E0\u6CD5\u663E\u793A</h3><p>\u4E3A\u9632\u6B62\u56FD\u5185\u7528\u6237\u8BBF\u95EECodeAnalysis Github\u9996\u9875\u65F6\u56FE\u7247\u8D44\u6E90\u52A0\u8F7D\u5931\u8D25\uFF0C\u76EE\u524D\u5404\u4E2Amd\u6587\u4EF6\u4E2D\u7684\u56FE\u7247\u8D44\u6E90\u5F15\u7528\u5730\u5740\u8C03\u6574\u589E\u52A0\u4E86URL\u524D\u7F00<code>https://tencent.github.io/CodeAnalysis/</code>\u3002</p><p>\u7528\u6237\u4E0B\u8F7D\u4EE3\u7801\u5E93\u5230\u672C\u5730\u540E\uFF0C\u53D1\u73B0\u65E0\u6CD5\u8BBF\u95EE\u8D44\u6E90\u6587\u4EF6\u65F6\uFF0C\u8BF7\u68C0\u67E5\u672C\u5730\u7F51\u7EDC\u662F\u5426\u80FD\u591F\u8FDE\u901A\u5916\u7F51\uFF0C\u5982\u679C\u65E0\u6CD5\u8FDE\u901A\u5916\u7F51\uFF0C\u53EF\u4EE5\u5728\u6587\u6863\u5F15\u5165\u8D44\u6E90\u5730\u5740\u4E2D\u8FDB\u884C<strong>\u76F8\u5BF9\u8DEF\u5F84</strong>\u66FF\u6362\uFF0C\u8C03\u6574\u5404\u4E2A\u8D44\u6E90\u6587\u4EF6\u7684\u94FE\u63A5\u3002</p><ul><li><p>\u5BF9\u4E8E\u6839\u76EE\u5F55\u4E0B\u7684md\u6587\u4EF6\uFF0C\u76F4\u63A5\u5220\u9664URL\u524D\u7F00\u5373\u53EF\uFF1A</p><p>\u4F8B\u5982\u5728<code>https://tencent.github.io/CodeAnalysis/media/homepage.png</code>\u8FD9\u4E2A\u94FE\u63A5\u53EF\u4EE5\u8C03\u6574\u4E3A<code>media/homepage.png</code></p></li><li><p>\u5BF9\u4E8E\u5176\u4ED6\u76EE\u5F55\u4E0B\u7684md\u6587\u4EF6\uFF0C\u5220\u9664URL\u524D\u7F00\u540E\uFF0C\u9700\u8C03\u6574\u6587\u4EF6\u76F8\u5BF9\u8DEF\u5F84\u94FE\u63A5\uFF1A</p><p>\u4F8B\u5982\u5BF9\u4E8E<code>doc/client.md</code>, \u9700\u5C06<code>https://tencent.github.io/CodeAnalysis/media/clientConfigIni.png</code>\u8FD9\u4E2A\u94FE\u63A5\u8C03\u6574\u4E3A<code>../media/clientConfigIni.png</code></p></li></ul>`,19);function fe(ve,xe){const s=c("RouterLink"),a=c("ExternalLinkIcon");return d(),t(p,null,[h,e("div",m,[b,_,e("p",null,[g,n(s,{to:"/zh/community/joingroup.html"},{default:l(()=>[f]),_:1}),v])]),e("nav",x,[e("ul",null,[e("li",null,[n(s,{to:"#server\u5E38\u89C1\u95EE\u9898\u4E0E\u5904\u7406\u65B9\u6CD5"},{default:l(()=>[y]),_:1}),e("ul",null,[e("li",null,[n(s,{to:"#_1-\u73AF\u5883\u90E8\u7F72"},{default:l(()=>[k]),_:1}),e("ul",null,[e("li",null,[n(s,{to:"#_1-1-pypi\u4E0B\u8F7D\u8D85\u65F6\u6216\u5931\u8D25"},{default:l(()=>[E]),_:1})]),e("li",null,[n(s,{to:"#_1-2-docker\u672A\u5B89\u88C5\u6216\u7248\u672C\u8FC7\u4F4E"},{default:l(()=>[R]),_:1})]),e("li",null,[n(s,{to:"#_1-3-docker-compose\u542F\u52A8\u5931\u8D25"},{default:l(()=>[C]),_:1})]),e("li",null,[n(s,{to:"#_1-4-docker\u955C\u50CF\u6E90\u4E0B\u8F7D\u8D85\u65F6\u6216\u5931\u8D25"},{default:l(()=>[T]),_:1})]),e("li",null,[n(s,{to:"#_1-5-python\u5B89\u88C5\u6216\u6267\u884C\u5931\u8D25"},{default:l(()=>[D]),_:1})]),e("li",null,[n(s,{to:"#_1-6-\u6267\u884Ccompose-init-sh\u811A\u672C\u7684pip-install\u63D0\u793Asha256\u4E0D\u5339\u914D\u9519\u8BEF"},{default:l(()=>[j]),_:1})]),e("li",null,[n(s,{to:"#_1-7-macbook-m1-\u4F7F\u7528-docker-compose\u62A5\u9519"},{default:l(()=>[A]),_:1})]),e("li",null,[n(s,{to:"#_1-8-celery\u3001gunicorn\u547D\u4EE4\u627E\u4E0D\u5230"},{default:l(()=>[S]),_:1})])])]),e("li",null,[n(s,{to:"#_2-\u670D\u52A1\u542F\u52A8\u4E0E\u521D\u59CB\u5316"},{default:l(()=>[N]),_:1}),e("ul",null,[e("li",null,[n(s,{to:"#_2-1-compose-init-sh\u811A\u672C\u9700\u8981\u586B\u5199\u7684\u5BC6\u7801\u662F\u4EC0\u4E48"},{default:l(()=>[O]),_:1})]),e("li",null,[n(s,{to:"#_2-2-\u670D\u52A1\u5360\u7528\u7AEF\u53E3\u5F02\u5E38"},{default:l(()=>[L]),_:1})]),e("li",null,[n(s,{to:"#_2-3-\u670D\u52A1\u8F93\u51FA\u65E5\u5FD7\u627E\u4E0D\u5230"},{default:l(()=>[P]),_:1})])])]),e("li",null,[n(s,{to:"#_3-\u5E73\u53F0\u4F7F\u7528"},{default:l(()=>[F]),_:1}),e("ul",null,[e("li",null,[n(s,{to:"#_3-1-\u5E73\u53F0\u767B\u5F55\u7684\u9ED8\u8BA4\u8D26\u53F7\u5BC6\u7801\u662F\u4EC0\u4E48"},{default:l(()=>[I]),_:1})]),e("li",null,[n(s,{to:"#_3-2-\u5E73\u53F0\u9ED8\u8BA4\u7684api-token\u662F\u4EC0\u4E48"},{default:l(()=>[U]),_:1})]),e("li",null,[n(s,{to:"#_3-3-\u4EE3\u7801\u5E93\u767B\u8BB0\u51FA\u9519-\u51FA\u73B0\u4EE3\u7801\u5E93\u53CA\u8D26\u53F7\u4E0D\u5339\u914D"},{default:l(()=>[q]),_:1})]),e("li",null,[n(s,{to:"#_3-4-\u67E5\u770B\u95EE\u9898\u6587\u4EF6\u63D0\u793A\u83B7\u53D6\u4EE3\u7801\u4FE1\u606F\u8017\u65F6\u8F83\u4E45-\u8BF7\u7A0D\u540E\u518D\u8BD5"},{default:l(()=>[w]),_:1})]),e("li",null,[n(s,{to:"#_3-5-\u5BA2\u6237\u7AEF\u8BBF\u95EE\u6587\u4EF6\u670D\u52A1\u5668-\u63D0\u793Amethod-upload-file-call-fails-on-error-expecting-value-line-1-column-1-char-0"},{default:l(()=>[M]),_:1})]),e("li",null,[n(s,{to:"#_3-6-\u5BA2\u6237\u7AEF\u8BBF\u95EE\u6587\u4EF6\u670D\u52A1\u5668-\u63D0\u793Aconnection-timed-out"},{default:l(()=>[V]),_:1})]),e("li",null,[n(s,{to:"#_3-7-\u4EFB\u52A1\u6267\u884C\u7ED3\u679C\u5F02\u5E38-\u63D0\u793A\u7B2C\u4E09\u65B9\u4F9D\u8D56\u6587\u4EF6\u670D\u52A1\u5668\u5F02\u5E38"},{default:l(()=>[G]),_:1})]),e("li",null,[n(s,{to:"#_3-8-\u5BA2\u6237\u7AEF\u6267\u884C\u65F6\u63D0\u793A\u5DE5\u5177-xxx-\u626B\u63CF\u8FDB\u7A0B\u4E3A\u7A7A-\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458\u914D\u7F6E\u5DE5\u5177\u8FDB\u7A0B"},{default:l(()=>[H]),_:1})])])])])]),e("li",null,[n(s,{to:"#codeanalysis\u4ED3\u5E93\u6587\u4EF6\u95EE\u9898"},{default:l(()=>[B]),_:1}),e("ul",null,[e("li",null,[n(s,{to:"#_1-clone\u5230\u672C\u5730\u65F6\u76F8\u5173md\u6587\u4EF6\u5185\u8D44\u6E90\u56FE\u7247\u65E0\u6CD5\u663E\u793A"},{default:l(()=>[$]),_:1})])])])])]),K,e("ul",null,[e("li",null,[e("a",W,[Q,n(a)])]),e("li",null,[e("a",z,[X,n(a)])]),e("li",null,[e("a",J,[Y,n(a)])])]),Z,e("ul",null,[e("li",null,[e("a",ee,[oe,n(a)])]),e("li",null,[e("a",ne,[se,n(a)])])]),le,e("ul",null,[e("li",null,[e("a",ae,[re,n(a)])]),e("li",null,[e("a",ce,[ie,n(a)])])]),de,e("ol",null,[te,e("li",null,[pe,ue,he,e("a",me,[be,n(a)])]),_e]),ge],64)}var ke=i(u,[["render",fe],["__file","FAQ.html.vue"]]);export{ke as default};
